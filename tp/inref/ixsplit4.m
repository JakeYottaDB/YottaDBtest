IXSPLIT3 ; ; ; Split an index-level block
	;
;
;   Under TP, add new records to the end and the middle of an existing index
;   block until it splits splits.
;
;				      before
;                     ----------------   ------------------
;                     | |     |     |     |       |     | |
;                     | |     |     |     |       |     | |
;                     |b|^A(1)|^A(2)| ... |^A(180)|*-key| |
;                     |h|     |     |     |       |     | |
;                     | |     |     |     |       |     | |
;                     | |     |     |     |       |     | |
;                     | |     |     |     |       |     | |
;                     | |     |     |     |       |     | |
;                     | |     |     |     |       |     | |
;                     ----------------   ------------------
;
;
;				      after
;			       xxxxx           xxxxxx  xxxxx
; ----------------   ------------------     --------------------   ----------
; | |     |     |     |       |     | |     | |       |       |     |     | |
; | |     |     |     |       |     | |     | |       |       |     |     | | 
; |b|^A(1)|^A(2)| ... |^A(110)|*-key| |     |b|^A     |^A     |     |*-key| |
; |h|     |     |     |       |     | |     |h|(110.4)|(110.6)| ... |     | |
; | |     |     |     |       |     | |     | |       |       |     |     | |
; | |     |     |     |       |     | |     | |       |       |     |     | |
; | |     |     |     |       |     | |     | |       |       |     |     | |
; | |     |     |     |       |     | |     | |       |       |     |     | |
; | |     |     |     |       |     | |     | |       |       |     |     | |
; ----------------   ------------------     --------------------   ----------
;			 |  |   ^	        ^  |    ^ |
;  TP chain---------------  ----|     TP chain'-|  ------ ----->
;

	n (act)
	i '$d(act) n act s act="w ""^A("",i,"") = "",^A(i),!"
	s cnt=0
	s X="1234567890"
	s X100=X_X_X_X_X_X_X_X_X_X
	s X1000=X100_X100_X100_X100_X100_X100_X100_X100_X100_X100
	s X1900=X1000_X100_X100_X100_X100_X100_X100_X100_X100_X100
	view "GDSCERT":1
	f i=1:1:181 s ^A(i)="A"_i_" "_X1900
	ts ():serial
	s ^A(179.5)="A179.5 "_X1900
	s ^A(110.2)="A110.2 "_X1900
	s ^A(110.4)="A110.4 "_X1900
	s ^A(110.6)="A110.6 "_X1900
	tc
	f i=1:1:181,179.5,110.2:.2:110.06 d
	. s cmp="A"_i_" "_X1900 
	. i ^A(i)'=cmp s cnt=cnt+1 x act
	w !,$s(cnt:"FAIL",1:"PASS")," from ",$t(+0)
	q
