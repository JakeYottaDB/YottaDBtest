V4TPE24 ;IW-KO-YS-TS,VV4TP,MVTS V9.10;15/7/96;PART-94 Transaction
 ;COPYRIGHT MUMPS SYSTEMS LABORATORY 1994-1996
11 ;---1. TSTART lname:SERIAL  ... TRESTART ... TROLLBACK
 F  Q:$$^V4GETS1
 D ^V4TPS21 ;^VA^VB(1)VAVB(1)
 TSTART VB:SERIAL
 IF $TRESTART G 2411
 D ^V4TPS22 ;^VC^VD(1)VCVD(1)
 D ^V4TPCHK1
 TRESTART
 TCOMMIT
 D ^V4TPCHK1
 L  H
2411 D ^V4TPCHK1
 D ^V4TPS21 ;^VA^VB(1)VAVB(1)
 D ^V4TPCHK1
 TROLLBACK
 D ^V4TPCHK1
 L  H
 ;
12 ;---2. TSTART lname:SERIAL  ... TCOMMIT
 F  Q:$$^V4GETS2
 TSTART VB:SERIAL
 D ^V4TPS21 ;^VA^VB(1)VAVB(1)
 D ^V4TPCHK2
 TCOMMIT
 D ^V4TPCHK2
 L  H
 ;==========================================
21 ;---1. TSTART (lname,lname,lname):SERIAL  ... TRESTART ... TROLLBACK
 F  Q:$$^V4GETS1
 D ^V4TPS21 ;^VA^VB(1)VAVB(1)
 TSTART (VA,VB,VD):SERIAL
 IF $TRESTART G 2421
 D ^V4TPS22 ;^VC^VD(1)VCVD(1)
 D ^V4TPCHK1
 TRESTART
 D ^V4TPCHK1
 L  H
2421 D ^V4TPCHK1
 D ^V4TPS22 ;^VC^VD(1)VCVD(1)
 TROLLBACK
 D ^V4TPCHK1
 L  H
 ;
22 ;---2. TSTART (lname,lname)  ... TROLLBACK
 F  Q:$$^V4GETS2
 TSTART (VA,VC)
 D ^V4TPS22 ;^VC^VD(1)VCVD(1)
 D ^V4TPCHK2
 TROLLBACK
 D ^V4TPCHK2
 L  H
 ;==========================================
31 ;---1. TSTART *:SERIAL  ... TRESTART ... HALT
 F  Q:$$^V4GETS1
 TSTART *:SERIAL
 IF $TRESTART G 2431
 D ^V4TPS22 ;^VC^VD(1)VCVD(1)
 D ^V4TPCHK1
 TRESTART
 D ^V4TPCHK1
 L  H
2431 D ^V4TPCHK1
 D ^V4TPS22 ;^VC^VD(1)VCVD(1)
 D ^V4TPCHK1
 HALT
 HALT
 ;
32 ;---2. TSTART ():SERIAL  ... TCOMMIT
 F  Q:$$^V4GETS2
 TSTART ():SERIAL
 D ^V4TPS3 ;^VA(1)^VB(1,2)^VC(2)^VD(1,2)VA(1)VB(1,2)VC(2)VD(1,2)
 D ^V4TPCHK2
 TCOMMIT
 D ^V4TPCHK2
 L  H
 ;==========================================
41 ;---1. TSTART ():SERIAL  ... TRESTART ... TCOMMIT
 F  Q:$$^V4GETS1
 TSTART ():SERIAL
 IF $TRESTART G 2441
 D ^V4TPS21 ;^VA^VB(1)VAVB(1)
 D ^V4TPCHK1
 TRESTART
 TCOMMIT
 D ^V4TPCHK1
 L  H
2441 D ^V4TPCHK1
 D ^V4TPS4 ;^va(1)^vb(2)^vc(1,2)^vd(2)va(1)vb(2)vc(1,2)vd(2)
 TCOMMIT
 D ^V4TPCHK1
 L  H
 ;
42 ;---2. TSTART lname  ... TRESTART ... TROLLBACK
 F  Q:$$^V4GETS2
 TSTART VB
 IF $TRESTART G 2442
 D ^V4TPS21 ;^VA^VB(1)VAVB(1)
 D ^V4TPCHK2
 TRESTART
 TCOMMIT
 D ^V4TPCHK2
 L  H
2442 D ^V4TPCHK2
 D ^V4TPS22 ;^VC^VD(1)VCVD(1)
 TROLLBACK
 D ^V4TPCHK2
 L  H
 ;==========================================
51 ;---1. TSTART lname:SERIAL  ... TRESTART ... TCOMMIT
 F  Q:$$^V4GETS1
 TSTART VA:SERIAL
 IF $TRESTART G 2451
 D ^V4TPS21 ;^VA^VB(1)VAVB(1)
 D ^V4TPCHK1
 TRESTART
 TCOMMIT
 D ^V4TPCHK1
 L  H
2451 D ^V4TPCHK1
 D ^V4TPS21 ;^VA^VB(1)VAVB(1)
 D ^V4TPCHK1
 TCOMMIT
 D ^V4TPCHK1
 L  H
 ;
52 ;---2. TSTART lname  ... TRESTART ... TCOMMIT
 F  Q:$$^V4GETS2
 TSTART VB
 IF $TRESTART G 2452
 D ^V4TPS21 ;^VA^VB(1)VAVB(1)
 D ^V4TPCHK2
 TRESTART
 TCOMMIT
 D ^V4TPCHK2
 L  H
2452 D ^V4TPCHK2
 D ^V4TPS22 ;^VC^VD(1)VCVD(1)
 TCOMMIT
 D ^V4TPCHK2
 L  H
 ;
SUM S SUM=0 F I=1:1 S L=$T(+I) Q:L=""  F K=1:1:$L(L) S SUM=SUM+$A(L,K)
 Q
