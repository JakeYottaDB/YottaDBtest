V3LOCK2 ;IW-KO-YS-TS,V3LOCK,MVTS V9.10;15/6/96;PART-90
 ;COPYRIGHT MUMPS SYSTEMS LABORATORY 1990-1996
 W !!,"36---V3LOCK2: +- LOCK command -2-"
 W !!,"LOCK with timeout",!
 ;
1 S ^ABSN="30369",^ITEM="III-369  LOCK +nref:timeout"
 S ^NEXT="2^V3LOCK2,V3INDNM^VV3" D ^V3PRESET K
 S ^VA=1,^VB=0,^VE="TIMEOUT-ERROR"
 LOCK ^VA
 JOB ^V3LOCKAT
 F I=1:1:100 Q:^VB=1  H 1
 S ^VA=2
 LOCK ^VF
 S ^VCOMP=^VA_" "_^VE
 S ^VCORR="2 1" D ^VEXAMINE K ^VA,^VB,^VE L
 ;
2 S ^ABSN="30370",^ITEM="III-370  LOCK -nref:timeout"
 S ^NEXT="3^V3LOCK2,V3INDNM^VV3" D ^V3PRESET K
 S ^VA=1,^VB=0,^VE=""
 LOCK (^VA,^VB,^VC)
 JOB ^V3LOCKB
 F I=1:1:100 Q:^VB=1  H 1
 S ^VA=3
 LOCK -^VA:3 S ^VE=^VE_$T_"/"
 S ^VB=5
 LOCK -^VB:3 S ^VE=^VE_$T_"/"
 L ^VF
 S ^VCOMP=^VA_" "_^VB_" "_^VE
 S ^VCORR="30 150 1/1/" D ^VEXAMINE K ^VA,^VB,^VE L
 ;
3 S ^ABSN="30371",^ITEM="III-371  LOCK +(nref):timeout"
 S ^NEXT="4^V3LOCK2,V3INDNM^VV3" D ^V3PRESET K
 S ^VA=1,^VB=0,^VE="TIMEOUT-ERROR"
 LOCK
 JOB ^V3LOCKAA
 F I=1:1:100 Q:^VB=1  H 1
 LOCK ^VF
 S ^VCOMP=^VA_" "_^VE
 S ^VCORR="2 1" D ^VEXAMINE K ^VA,^VB,^VE L
 ;
4 S ^ABSN="30372",^ITEM="III-372  LOCK -(nref):timeout"
 S ^NEXT="5^V3LOCK2,V3INDNM^VV3" D ^V3PRESET K
 S ^VA=1,^VB=0,^VE=""
 LOCK (^VA,^VB,^VC)
 JOB ^V3LOCKB
 F I=1:1:100 Q:^VB=1  H 1
 S ^VA=3
 LOCK -(^VA):3 S ^VE=^VE_$T_"/"
 S ^VB=5
 LOCK -(^VB):3 S ^VE=^VE_$T_"/"
 L ^VF
 S ^VCOMP=^VA_" "_^VB_" "_^VE
 S ^VCORR="30 150 1/1/" D ^VEXAMINE K ^VA,^VB,^VE L
 ;
5 S ^ABSN="30373",^ITEM="III-373  LOCK +(^VA,^VB,^VC):timeout"
 S ^NEXT="6^V3LOCK2,V3INDNM^VV3" D ^V3PRESET K
 S ^VA=1,^VB=10,^VC=100,^VD=0
 LOCK (^VB,^VC)
 JOB ^V3LOCKCT
 F I=1:1:100 Q:^VD=1  H 1
 S ^VB=20
 LOCK ^VF
 S ^VCOMP=^VA_" "_^VB_" "_^VC
 S ^VCORR="121/1/ 20 100" D ^VEXAMINE K ^VA,^VB,^VC,^VD L
 ;
6 S ^ABSN="30374",^ITEM="III-374  LOCK -(^VA,^VB,^VC):timeout"
 S ^NEXT="7^V3LOCK2,V3INDNM^VV3" D ^V3PRESET K
 S ^VA=1,^VB=10,^VC=100,^VD=1000,^VE=0,^VF=0
 LOCK (^VA,^VB,^VC,^VD)
 JOB V3LOCKDT^V3LOCKD
 F I=1:1:100 Q:^VE=1  H 1
 S ^VA=3
 LOCK -(^VA,^VB,^VC):10 s ^VF=$T
 S ^VB=10
 LOCK -^VD
 L ^VF
 S ^VCOMP=^VA_" "_^VB_" "_^VC_" "_^VD_" "_^VE_" "_^VF
 S ^VCORR="1113 10 100 1000 1 1" D ^VEXAMINE K ^VA,^VB,^VC,^VD,^VE,^VF L
 ;
7 S ^ABSN="30375",^ITEM="III-375  LOCK +^VA,+^VA,+^VA"
 S ^NEXT="8^V3LOCK2,V3INDNM^VV3" D ^V3PRESET K  L
 S ^VA=2,^VB=0
 JOB V3LOCKMA^V3LOCKA
 F I=1:1:100 Q:^VB=1  H 1
 LOCK ^VA
 S ^VA=^VA+2
 LOCK ^VF
 S ^VCOMP=^VA_" "_^VB
 S ^VCORR="2002 1" D ^VEXAMINE K ^VA,^VB L
 ;
8 S ^ABSN="30376",^ITEM="III-376  LOCK +(^VA,^VA,^VA)"
 S ^NEXT="9^V3LOCK2,V3INDNM^VV3" D ^V3PRESET K  L
 S ^VA=2,^VB=0
 JOB V3LOCKMB^V3LOCKA
 F I=1:1:100 Q:^VB=1  H 1
 LOCK ^VA
 LOCK ^VA S ^VA=^VA+2
 LOCK ^VF
 S ^VCOMP=^VA_" "_^VB
 S ^VCORR="2002 1" D ^VEXAMINE K ^VA,^VB L
 ;
9 S ^ABSN="30377",^ITEM="III-377  LOCK -^VA,-^VA,-^VA"
 S ^NEXT="10^V3LOCK2,V3INDNM^VV3" D ^V3PRESET K
 S ^VA=1,^VB=10,^VC=0,^VE=0
 LOCK (^VA,^VB)
 JOB V3LOCKMD^V3LOCKD
 F I=1:1:100 Q:^VE=1  H 1
 S ^VA=3
 LOCK -^VA,-^VA,-^VA
 S ^VB=5
 LOCK -^VB
 L ^VF
 S ^VCOMP=^VA_" "_^VB_" "_^VE
 S ^VCORR="35 5 1" D ^VEXAMINE K ^VA,^VB,^VC L
 ;
10 S ^ABSN="30378",^ITEM="III-378  LOCK -(^VA,^VA,^VA)"
 S ^NEXT="V3INDNM^VV3" D ^V3PRESET K
 S ^VA=1,^VB=10,^VC=0,^VE=0
 LOCK (^VA,^VB)
 JOB V3LOCKMD^V3LOCKD
 F I=1:1:100 Q:^VE=1  H 1
 S ^VA=3
 LOCK -(^VA,^VA,^VA)
 S ^VB=5
 LOCK -^VB
 L ^VF
 S ^VCOMP=^VA_" "_^VB_" "_^VE
 S ^VCORR="35 5 1" D ^VEXAMINE K ^VA,^VB,^VC L
 ;
END W !!,"End of 36 --- V3LOCK2",!
 K  Q
 ;
SUM S SUM=0 F I=1:1 S L=$T(+I) Q:L=""  F K=1:1:$L(L) S SUM=SUM+$A(L,K)
 Q
