MPTDAT	;validation of %global listings
	S PASS=0,FAIL=0,ITEM=""
	W !!,"MPTDAT: TEST OF %GLOBAL LISTINGS"
	W !!,"DO EMPTYGD",!
	D EMPTYGD
153	W !,"I-172/153.0  %G - names, descendants and values"
	D SCEND,^%G,DATA,^%G,SCEND
	W !,"I-172/153.1  %GD - globals listling"
	D ^%GD,DATA,^%GD,SCEND
	W !,"I-172/153.2  %GSEL - globals selection"
	D ^%GSEL,DATA,^%GSEL
	q

DATA	S ^A2345678="root A8",^B2345678="root B8",^C2345678="root C8",^D2345678="root D8",^E2345678="root E8",^F2345678="root F8"
	S ^A234567890123456789012345678901="root A31",^B234567890123456789012345678901="root B31"
	S ^C234567890123456789012345678901="root C31",^D234567890123456789012345678901="root D31"
	S ^E234567890123456789012345678901="root E31",^F234567890123456789012345678901="root F31"

	S ^A2345678(0)="a0 of A8",^B2345678(0)="b0 of B8",^C2345678(0)="c0 of C8",^D2345678(0)="d0 of D8",^E2345678(0)="e0 of E8",^F2345678(0)="f0 of F8"
	S ^A234567890123456789012345678901(0)="a0 of A31",^B234567890123456789012345678901(0)="b0 of B31"
	S ^C234567890123456789012345678901(0)="c0 of C31",^D234567890123456789012345678901(0)="d0 of D31"
	S ^E234567890123456789012345678901(0)="e0 of E31",^F234567890123456789012345678901(0)="f0 of F31"

	S ^A2345678(0,0)=64008,^C2345678(0,0)=66008,^D2345678(0,0)=67008,^F2345678(0,0)=69008
	S ^A234567890123456789012345678901(0,0)=640031,^C234567890123456789012345678901(0,0)=660031
	S ^D234567890123456789012345678901(0,0)=670031,^F234567890123456789012345678901(0,0)=690031

	Q

SCEND	K ^A2345678,^B2345678,^C2345678,^D2345678,^E2345678,^F2345678
	K ^A234567890123456789012345678901,^B234567890123456789012345678901,^C234567890123456789012345678901
	K ^D234567890123456789012345678901,^E234567890123456789012345678901,^F234567890123456789012345678901

	K ^a,^b,^c,^d,^JOBCNT,^ERRCNT,^PASS,^DURATION,^STOP
	Q

EMPTYGD
	W !!,"TEST ^%GD with an empty transaction",!
	TSTART
	TCOMMIT
	d ^%GD
	W !
