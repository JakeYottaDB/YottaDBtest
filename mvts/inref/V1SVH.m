V1SVH ;IW-KO-TS,VV1,MVTS V9.10;15/6/96;SPECIAL VARIABLE $HOROLOG
 ;COPYRIGHT MUMPS SYSTEMS LABORATORY 1978-1996
 W !!,"176---V1SVH: Special variable ( $HOROLOG )",!
 ;
 W !,"This routine (176---V1SVH) contains 1 test to be checked by OPERATOR."
 ;
793 W !,"I-793  Format of $H"
 S ^ABSN="12027",^ITEM="I-793  Format of $H",^NEXT="794^V1SVH,V1SVS^VV1" D ^V1PRESET
 S ^VCOMP=$HOROLOG?1N.N1","1N.N_($H?1"0".N.E)_($H?.N1","1"0"1.N)
 S ^VCORR=100 D ^VEXAMINE
 E  W:$Y>55 # W !!,"FORM OF $HOROLOG IS NOT VALID",!,"VALUE OF $H IS ",$H
 E  W !,"VALUE OF $H SHOULD BE ""D,S"" WEHRE ""D"" IS AN INTEGER VALUE"
 E  W !,"COUNTING DAYS, AND ""S"" IS AN INTEGER VALUE MODULO 86400"
 E  W !,"COUNTING SECONDS",!
 ;
794 I $D(^VENVIRON("INPUT USE"))=1 U ^VENVIRON("INPUT USE")
 W !!,"BE READY WITH AN ACCURATE WATCH FOR THE CURRENT TIME."
REP W !,"When you are ready, press ""Y/y"" and a <CR> : " S Y="Y"
 IF Y="Y" GOTO REP1
 IF Y="y" GOTO REP1
 GOTO REP
REP1 I $D(^VENVIRON("OUTPUT USE"))=1 U ^VENVIRON("OUTPUT USE")
 W !,"I-794  Value of $H (by OPERATOR)"
 S ^ABSN="12028",^ITEM="I-794  Value of $H (by OPERATOR)",^NEXT="V1SVS^VV1" D ^V1PRESET
TIME S %T=$P($H,",",2),%X=%T\60
 S %T=$E(%X\60+100,2,3)_":"_$E(%X#60+100,2,3)_":"_$E(%T#60+100,2,3) K %X
DATE S %H=$H>21608+$H+1460,%L=%H\1461,%Y=%H#1461
 S %YR=%L*4+1837+(%Y\365),%D=%Y#365+1
 S %M=1 I %Y=1460 S %D=366,%YR=%YR-1
 F %I=31,%YR#4=0+28,31,30,31,30,31,31,30,31,30,31 Q:%D'>%I  S %D=%D-%I,%M=%M+1
 S %D=$E(%D+100,2,3)_"-"_$E("JANFEBMARAPRMAYJUNJULAUGSEPOCTNOVDEC",%M*3-2,%M*3)_"-"_$E(%YR#100+100,2,3)
 ;
 W !,"       CONFIRM THE FOLLOWING DATE AND TIME BY ACCURATE WATCH"
 W !,"       ",%D,"  ",%T
 D MANPF1^VEXAMINE I $D(RES)=1 I RES="AGAIN" G 794
 ;
END W !!,"End of 176---V1SVH",!
 K  Q
SUM S SUM=0 F I=1:1 S L=$T(+I) Q:L=""  F K=1:1:$L(L) S SUM=SUM+$A(L,K)
 Q
