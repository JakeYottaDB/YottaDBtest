V1GVN ;IW-YS-TS,VV1,MVTS V9.10;15/6/96;ACCEPTABLE GLOBAL VARIABLE NAME
 ;COPYRIGHT MUMPS SYSTEMS LABORATORY 1978-1996
 W !!,"108---V1GVN: Acceptable global variable names",!
 ;
 I $D(^VENVIRON("INPUT USE"))=1 U ^VENVIRON("INPUT USE")
 W !!,"This test uses globals as ^%, ^%A1, ^%1234, ^%ABCDEF, ^%ABC45678, "
 W !,"^%1X2Y3Z. Watch out! This test will kill the indicated globals below:",!!
 K EXIST S EXIST=0
 IF $D(^%) W "^%" S EXIST=1,EXIST(1)="^%"
 IF $D(^%A1) W:EXIST ", " W "^%A1" S EXIST=1,EXIST(2)="^%A1"
 IF $D(^%1234) W:EXIST ", " W "^%1234" S EXIST=1,EXIST(3)="^%1234"
 IF $D(^%ABCDEF) W:EXIST ", " W "^%ABCDEF" S EXIST=1,EXIST(4)="^%ABCDEF"
 IF $D(^%ABC456GH) W:EXIST ", " W "^%ABC456GH" S EXIST=1,EXIST(5)="^%ABC456GH"
 IF $D(^%1X2Y3Z) W:EXIST ", " W "^%1X2Y3Z" S EXIST=EXIST+1,EXIST(6)="^%1X2Y3Z"
 IF EXIST=0 W "NONE" W !! G 393
 W !!
 F I=1:1:6 I $D(EXIST(I)) D YN I YN="N" K EXIST(I)
 ;
393 I $D(^VENVIRON("OUTPUT USE"))=1 U ^VENVIRON("OUTPUT USE")
 IF $D(EXIST(1)) G 394
 S ^ABSN="11469",^ITEM="I-393  gvn is ""%""",^NEXT="394^V1GVN,V1DLA^VV1" D ^V1PRESET
 S ^VCOMP="",^%="^%" S ^VCOMP=^% ;SYSTEM ERROR MAY RESULT
 S ^VCORR="^%" D ^VEXAMINE
 ;
394 IF $D(EXIST(4)) G 395
 S ^ABSN="11470",^ITEM="I-394  gvn is % followed by alphas",^NEXT="395^V1GVN,V1DLA^VV1" D ^V1PRESET
 S VCOMP="",^%ABCDEF="^%ABCDEF" S VCOMP=^%ABCDEF
 S ^VCOMP=VCOMP,^VCORR="^%ABCDEF" D ^VEXAMINE
 ;
395 IF $D(EXIST(3)) G 396
 S ^ABSN="11471",^ITEM="I-395  gvn is % followed by digits",^NEXT="396^V1GVN,V1DLA^VV1" D ^V1PRESET
 S VCOMP="",^%1234="^%1234" S VCOMP=^%1234
 S ^VCOMP=VCOMP,^VCORR="^%1234" D ^VEXAMINE
 ;
396 W !,"I-396  gvn is % followed by alpha and digit"
 IF $D(EXIST(2)) G 3962
 S ^ABSN="11472",^ITEM="I-396.1  gvn is % followed by an alpha and a digit",^NEXT="3962^V1GVN,V1DLA^VV1" D ^V1PRESET
 S VCOMP="",^%A1="^%A1" S VCOMP=^%A1
 S ^VCOMP=VCOMP,^VCORR="^%A1" D ^VEXAMINE
 ;
3962 IF $D(EXIST(5)) G 397
 S ^ABSN="11473",^ITEM="I-396.2  gvn is % followed by alphas and digits",^NEXT="397^V1GVN,V1DLA^VV1" D ^V1PRESET
 S VCOMP="",^%ABC456GH="^%ABC456GH",VCOMP=^%ABC456GH
 S ^VCOMP=VCOMP,^VCORR="^%ABC456GH" D ^VEXAMINE
 ;
397 W !,"I-397  gvn is an alpha"
 S ^ABSN="11474",^ITEM="I-397  ^V",^NEXT="398^V1GVN,V1DLA^VV1" D ^V1PRESET
 S ^VCOMP="",^V="^V",^VCOMP=^V,^VCORR="^V" D ^VEXAMINE
 ;
398 W !,"I-398  gvn is alpha and digit"
3981 S ^ABSN="11475",^ITEM="I-398.1  ^V1",^NEXT="3982^V1GVN,V1DLA^VV1" D ^V1PRESET
 S ^VCOMP="",^V1="^V1",^VCOMP=^V1,^VCORR="^V1" D ^VEXAMINE
3982 S ^ABSN="11476",^ITEM="I-398.2  ^V1A",^NEXT="3983^V1GVN,V1DLA^VV1" D ^V1PRESET
 S ^VCOMP="",^V1A="^V1A",^VCOMP=^V1A,^VCORR="^V1A" D ^VEXAMINE
3983 S ^ABSN="11477",^ITEM="I-398.3  ^V100",^NEXT="3984^V1GVN,V1DLA^VV1" D ^V1PRESET
 S ^VCOMP="",^V100="^V100",^VCOMP=^V100,^VCORR="^V100" D ^VEXAMINE
3984 S ^ABSN="11478",^ITEM="I-398.4  ^V1AB",^NEXT="3985^V1GVN,V1DLA^VV1" D ^V1PRESET
 S ^VCOMP="",^V1AB="^V1AB",^VCOMP=^V1AB,^VCORR="^V1AB" D ^VEXAMINE
3985 S ^ABSN="11479",^ITEM="I-398.5  ^V1Z1Y2X",^NEXT="3986^V1GVN,V1DLA^VV1" D ^V1PRESET
 S ^VCOMP="",^V1Z1Y2X="^V1Z1Y2X",^VCOMP=^V1Z1Y2X,^VCORR="^V1Z1Y2X" D ^VEXAMINE
3986 S ^ABSN="11480",^ITEM="I-398.6  ^V1ABCDE",^NEXT="399^V1GVN,V1DLA^VV1" D ^V1PRESET
 S ^VCOMP="",^V1ABCDE="^V1ABCDE",^VCOMP=^V1ABCDE,^VCORR="^V1ABCDE" D ^VEXAMINE
 ;
399 W !,"I-399  Maximum length of gvn"
3991 S ^ABSN="11481",^ITEM="I-399.1  gvn is ^V1ABCDEF",^NEXT="3992^V1GVN,V1DLA^VV1" D ^V1PRESET
 S ^VCOMP="",^V1ABCDEF="^V1ABCDEF" S ^VCOMP=^V1ABCDEF
 S ^VCORR="^V1ABCDEF" D ^VEXAMINE
 ;
3992 S ^ABSN="11482",^ITEM="I-399.2  ^V100000A",^NEXT="400^V1GVN,V1DLA^VV1" D ^V1PRESET
 S VCOMP="",^V100000A="^V100000A" S VCOMP=^V100000A
 S ^VCOMP=VCOMP,^VCORR="^V100000A" D ^VEXAMINE
 ;
400 W !,"I-400  8 levels depth subscript"
4001 S ^ABSN="11483",^ITEM="I-400.1  1 level depth subscript",^NEXT="4002^V1GVN,V1DLA^VV1" D ^V1PRESET
 S ^VCOMP="",^V1(1)="^V1(1)" S ^VCOMP=^V1(1)
 S ^VCORR="^V1(1)" D ^VEXAMINE
 ;
4002 S ^ABSN="11484",^ITEM="I-400.2  8 levels depth subscript",^NEXT="4003^V1GVN,V1DLA^VV1" D ^V1PRESET
 S ^VCOMP="",^V1ABCDEF(1,2,3,4,5,6,7,8)="^V1ABCDEF(1,2,3,4,5,6,7,8)" S ^VCOMP=^V1ABCDEF(1,2,3,4,5,6,7,8)
 S ^VCORR="^V1ABCDEF(1,2,3,4,5,6,7,8)" D ^VEXAMINE
 ;
4003 IF $D(EXIST(6)) G END
 S ^ABSN="11485",^ITEM="I-400.3  gvn is ^%1X2Y3Z(1,1,1,1,1,1,1,1)",^NEXT="V1DLA^VV1" D ^V1PRESET
 S ^VCOMP="",^%1X2Y3Z(1,1,1,1,1,1,1,1)="^%1X2Y3Z(1,1,1,1,1,1,1,1)" S ^VCOMP=^%1X2Y3Z(1,1,1,1,1,1,1,1)
 S ^VCORR="^%1X2Y3Z(1,1,1,1,1,1,1,1)" D ^VEXAMINE
 ;
END W !!,"End of 108---V1GVN",!
 I $D(EXIST(1))=0 K ^%
 I $D(EXIST(2))=0 K ^%A1
 I $D(EXIST(3))=0 K ^%1234
 I $D(EXIST(4))=0 K ^%ABCDEF
 I $D(EXIST(5))=0 K ^%ABC456GH
 I $D(EXIST(6))=0 K ^%1X2Y3Z
 K ^V,^V1,^V1A,^V100,^V1AB,^V1Z1Y2X,^V1ABCDE,^V1ABCDEF,^V100000A
 K  Q
SUM S SUM=0 F I=1:1 S L=$T(+I) Q:L=""  F K=1:1:$L(L) S SUM=SUM+$A(L,K)
 Q
YN W !,"DO YOU MIND IF GLOBAL ",EXIST(I)," IS KILLD (Y/N)? "
 READ YN
 I YN="Y" Q
 I YN="N" Q
 G YN
