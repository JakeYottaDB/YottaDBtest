V1NST2	;NESTING LEVEL -2-;KO-YS-TS,,VALIDATION VERSION 7.1;31-AUG-1987;
	;COPYRIGHT MUMPS SYSTEM LABORATORY 1978
	S PASS=0,FAIL=0
	W !!,"V1NST2: TEST OF NESTING ( FOR, XECUTE, DO, @, <FUNCTION> ) -2-"
	W !,"AS THIS OWN ROUTINE IS COUNTED AS ONE LEVEL OF NESTING"
	W !,"ADDITIONAL 14 LEVELS OF NESTING ARE REQUIRED." W:$Y>55 #
	W !,"ADMITTED NESTING LEVELS ARE INDICATED BY THE NUMBER IN EACH TEST.",!
	;
657	W !,"I-657  1 level of DO, and 14 levels of argument level indirection"
	S ITEM="I-657  ",V=""
	S ^V1ID(1)="D1,ED1^V1NSTE,@^V1ID(2)",^V1ID(2)="ED2^V1NSTE,@^V1ID(3)",^V1ID(3)="ED3^V1NSTE,@^V1ID(4)"
	S ^V1ID(4)="ED4^V1NSTE,@^V1ID(5)",^V1ID(5)="D5,ED5^V1NSTE,@^V1ID(6)",^V1ID(6)="ED6^V1NSTE,@^V1ID(7)"
	S ^V1ID(7)="ED7^V1NSTE,@^V1ID(8)",^V1ID(8)="ED8^V1NSTE,@^V1ID(9)",^V1ID(9)="ED9^V1NSTE,@^V1ID(10)"
	S ^V1ID(10)="D10,ED10^V1NSTE,@^V1ID(11)",^V1ID(11)="ED11^V1NSTE,@^V1ID(12)",^V1ID(12)="ED12^V1NSTE,@^V1ID(13)"
	S ^V1ID(13)="ED13^V1NSTE,@^V1ID(14)",^V1ID(14)="ED14^V1NSTE"
	D @^V1ID(1)
	S VCOMP=V,VCORR="1234567891011121314D1 D2 D3 D4 567891011121314D5 D6 D7 D8 D9 1011121314D10 D11 D12 D13 D14 "
	D EXAMINER K ^V1ID
	;
658	W !,"I-658  1 level of DO, and 14 levels of name level indirection"
	S ITEM="I-658  ",VCOMP=""
	S X="#",A="X",B="@A",C="@B",D="@C",E="@D",F="@E",G="@F",H="@G",I="@H"
	S J="@I",K="@J",L="@K",M="@L",N="@M"
	S VCOMP=X_@A_@B_@C_@D_@E_@F_@G_@H_@I_@J_@K_@L_@M_@N_" "
	S A="A" S VCOMP=VCOMP_A_@A_@@A_@@@A_@@@@A_@@@@@A_@@@@@@A_@@@@@@@A_@@@@@@@@A
	S VCOMP=VCOMP_@@@@@@@@@A
	S VCOMP=VCOMP_@@@@@@@@@@A_@@@@@@@@@@@A_@@@@@@@@@@@@A_@@@@@@@@@@@@@A
	S VCOMP=VCOMP_@@@@@@@@@@@@@@A
	S VCORR="############### AAAAAAAAAAAAAAA" D EXAMINER
	;
659	W !,"I-659  up to 6 levels nesting of functions"
FNC	S ITEM="I-659  ",VCOMP=""
F20	S VCOMP=VCOMP_$L($T(FNC))+2-$L($T(FNC))
F21	S VCOMP=VCOMP_$P("1,2",$P(",^.","^",1),$E(2,1))
F30	S VCOMP=VCOMP_$A($C($L("A1B")))
F31	S VCOMP=VCOMP_$L($E($E("ABC",1,3),+$T(F31),3))
F40	S VCOMP=VCOMP_$F("12345",$L($E($P("ABCDE","B",2),1,"3")))
F41	S VCOMP=VCOMP_$F($P($E("12345",$F("A","B"),$L("ABCD")),0,1),"3")
F50	S VCOMP=VCOMP_$E($E($E($E($E("ABCD5",1,5),1,5),1,5),1,5),5)
F51	S VCOMP=VCOMP_$L($J($C($E($P("PQR64","P",2),$L(123),4),6_$L("ABCDE")),5))
F60	S VCOMP=VCOMP_$L($E($E($E($E($E("ABCDEF",1,6),1,6),1,6),1,6),1,6))
	S VCORR="223344556" D EXAMINER
	;
END	W !!,"END OF V1NST2",!
	S ROUTINE="V1NST2",TESTS=3,AUTO=3,VISUAL=0 D ^VREPORT
	K  K ^V1ID Q
	;
EXAMINER	I VCORR=VCOMP S PASS=PASS+1 W !,"   PASS  ",ITEM W:$Y>55 # Q
	S FAIL=FAIL+1 W !,"** FAIL  ",ITEM W:$Y>55 #
	W !,"           COMPUTED =""",VCOMP,"""" W:$Y>55 #
	W !,"           CORRECT  =""",VCORR,"""" W:$Y>55 #
	Q
D6611	S V=V_I_J_" " Q
	;
GOTO	;nesting GOTO command
GG1	S V=V_"G1" G G2^V1NSTE
GG2	S V=V_"G2" G G3^V1NSTE
GG3	S V=V_"G3" G G4^V1NSTE
GG4	S V=V_"G4" G G5^V1NSTE
GG5	S V=V_"G5" G G6^V1NSTE
GG6	S V=V_"G6" G G7^V1NSTE
GG7	S V=V_"G7" G G8^V1NSTE
GG8	S V=V_"G8" G G9^V1NSTE
GG9	S V=V_"G9" G G10^V1NSTE
GG10	S V=V_"G10" G G11^V1NSTE
GG11	S V=V_"G11" G G12^V1NSTE
GG12	S V=V_"G12" G G13^V1NSTE
GG13	S V=V_"G13" G G14^V1NSTE
GG14	S V=V_"G14" G G6602
	;
D1	S V=V_1 D D2 Q
D2	S V=V_2 D D3 Q
D3	S V=V_3 D D4 Q
D4	S V=V_4 D D5 Q
D5	S V=V_5 D D6 Q
D6	S V=V_6 D D7 Q
D7	S V=V_7 D D8 Q
D8	S V=V_8 D D9 Q
D9	S V=V_9 D D10 Q
D10	S V=V_10 D D11 Q
D11	S V=V_11 D D12 Q
D12	S V=V_12 D D13 Q
D13	S V=V_13 D D14 Q
D14	S V=V_14 Q
	;
D6612	S V=V_I_J_" "
