V4TP11 ;IW-KO-YS-TS,VV4TP,MVTS V9.10;15/7/96;PART-94 Transaction
 ;COPYRIGHT MUMPS SYSTEMS LABORATORY 1994-1996
 ;
 W !!,"1 Transaction tests",!
 ;
 W !!,"142---V4TP11: 1 Transaction tests  -1-"
 ;
1 S ^ABSN="40867",^ITEM="IV-40867  $TLEVEL and $TRESTART"
 S ^NEXT="2^V4TP11,V4TP12^VV4TP" D ^V4PRETP1
 JOB 1^V4TPE11::60 S WAIT=$T
 L  F  Q:$$^V4GETSM
 S ^VCORR="0 0/0 0/0 0/0 0*11/"
 D ^V4GETCOM D ^VEXAMINE
 ;
 w !!,"TSTART without argument",!
 ;
2 S ^ABSN="40868",^ITEM="IV-868  TSTART ... TCOMMIT"
 S ^NEXT="3^V4TP11,V4TP12^VV4TP" D ^V4PRETP1
 JOB 2^V4TPE11::60 S WAIT=$T
 L  F  Q:$$^V4GETSM
 S ^VCORR="#1^VA^VB(1)VAVB(1)10/#1^VA^VB(1)VAVB(1)00/*11/#M^VA^VB(1)00/"
 D ^V4TPCHKM D ^V4GETCOM D ^VEXAMINE
 ;
3 S ^ABSN="40869",^ITEM="IV-869  TSTART ... TROLLBACK"
 S ^NEXT="4^V4TP11,V4TP12^VV4TP" D ^V4PRETP1
 JOB 3^V4TPE11::60 S WAIT=$T
 L  F  Q:$$^V4GETSM
 S ^VCORR="#1^VA^VB(1)VAVB(1)10/#1VAVB(1)00/*11/#M00/"
 D ^V4TPCHKM D ^V4GETCOM D ^VEXAMINE
 ;
4 S ^ABSN="40870",^ITEM="IV-870  TSTART ... HALT"
 S ^NEXT="V4TP12^VV4TP" D ^V4PRETP1
 JOB 4^V4TPE11::60 S WAIT=$T
 L  F  Q:$$^V4GETSM
 S ^VCORR="#1^VA^VB(1)VAVB(1)10/*11/#M00/"
 D ^V4TPCHKM D ^V4GETCOM D ^VEXAMINE
 ;
END W !!,"End of 142 --- V4TP11",!
 Q
 ;
SUM S SUM=0 F I=1:1 S L=$T(+I) Q:L=""  F K=1:1:$L(L) S SUM=SUM+$A(L,K)
 Q
